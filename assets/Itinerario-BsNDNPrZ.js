const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlaceMap-D4Q5APgx.js","assets/motion-4lzZM1vH.js","assets/react-CS5HZ5au.js","assets/leaflet-Cb3phnou.js","assets/maps-D4Ps3fer.js","assets/PlaceMap-CIGW-MKW.css"])))=>i.map(i=>d[i]);
import{_ as S}from"./index-Bpc69V6n.js";import{j as e}from"./motion-4lzZM1vH.js";import{r as d,L as T}from"./react-CS5HZ5au.js";import{P as $}from"./PlaceCard-3SpXD4qK.js";import{s as k,B as x,C as I}from"./seo-rf2vQfsQ.js";import{T as O}from"./Tag-B2H443fy.js";import{p as j}from"./places-DTPpa8rN.js";import{g as E}from"./maps-D4Ps3fer.js";import{g as v}from"./storage-ClT4Xxo4.js";const _={"1-2h":90,"medio-dia":240,"dia-completo":420};function y(t){return t.reduce((a,n)=>a+_[n.duration],0)}function N(t){const a=Math.floor(t/60),n=t%60;return a===0?`${n} min`:n===0?`${a} h`:`${a} h ${n} min`}function C(t){return t<=120?"Plan corto (1‚Äì2 horas)":t<=300?"Medio d√≠a":"D√≠a completo"}const M="tigre:itinerary:order:v1";function P(){try{const t=localStorage.getItem(M);return t?JSON.parse(t):[]}catch{return[]}}function L(t){localStorage.setItem(M,JSON.stringify(t))}function D(t,a){const n=new Set(t),o=a.filter(l=>n.has(l)),i=t.filter(l=>!o.includes(l));return[...o,...i]}function z(t){const n=(typeof window<"u"?window.location.href:t).split("#")[0];return n.endsWith("/")?n.slice(0,-1):n}function B(t,a){const n=y(t),o=`Itinerario en Tigre ‚Äî ${C(n)} (${N(n)})`,i=typeof window<"u"?z(a):a,l=t.map((m,p)=>{const f=`${i}/#/lugares/${m.slug}`,h=typeof m.lat=="number"&&typeof m.lng=="number"?E(m.lat,m.lng):null;return[`${p+1}) ${m.name}`,`   Detalle: ${f}`,h?`   C√≥mo llegar: ${h}`:null].filter(Boolean).join(`
`)});return[o,"",...l].join(`
`)}const R=d.lazy(()=>S(()=>import("./PlaceMap-D4Q5APgx.js"),__vite__mapDeps([0,1,2,3,4,5]))),U=new Set(j.map(t=>t.slug));function w(t){return t.filter(a=>U.has(a))}function W(){d.useEffect(()=>{k("Mi itinerario ‚Äî Tigre Turismo","Organiz√° tus favoritos, estim√° tiempos y arm√° un plan.")},[]);const[t,a]=d.useState(()=>{const r=D(v(),P());return w(r)}),[n,o]=d.useState(!1);d.useEffect(()=>{L(t)},[t]);const i=d.useMemo(()=>{const r=new Map(j.map(s=>[s.slug,s]));return t.map(s=>r.get(s)).filter(s=>!!s)},[t]),l=d.useMemo(()=>y(i),[i]),m=d.useMemo(()=>C(l),[l]),p=(r,s)=>{a(c=>{const u=[...c],g=r+s;return g<0||g>=u.length?c:([u[r],u[g]]=[u[g],u[r]],u)})},f=()=>{const r=w(v());a(r)},h=r=>{a(s=>s.filter(c=>c!==r))},b=async()=>{const r=window.location.origin,s=B(i,r);try{await navigator.clipboard.writeText(s),o(!0),window.setTimeout(()=>o(!1),1500)}catch{const c=document.createElement("textarea");c.value=s,document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c),o(!0),window.setTimeout(()=>o(!1),1500)}};return j.length?t.length?e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-10",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Mi itinerario"}),e.jsx("p",{className:"mt-2 text-lg text-slate-600",children:"Orden√° tus favoritos y obten√© una estimaci√≥n del tiempo total."}),e.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-3",children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-6",children:[e.jsx("h2",{className:"font-semibold",children:"Resumen"}),e.jsx(O,{children:m})]}),e.jsxs("div",{className:"mt-3 space-y-2 px-4 text-lg text-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Lugares"}),e.jsx("span",{className:"font-semibold",children:i.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tiempo estimado"}),e.jsx("span",{className:"font-semibold",children:N(l)})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 px-4 pb-4",children:[e.jsx(x,{variant:"ghost",onClick:f,children:"Resetear orden"}),e.jsx(x,{onClick:b,disabled:!i.length,children:n?"Copiado ‚úì":"Copiar plan del d√≠a"})]}),e.jsx("p",{className:"px-4 pb-6 text-base text-slate-500",children:"Tiempo estimado solo para actividades. No contempla traslados, filas ni pausas para comer."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white/70 p-6 text-slate-700",children:"Cargando mapa‚Ä¶"}),children:e.jsx(R,{places:i,height:360})}),e.jsx("div",{className:"mt-4 grid gap-4",children:i.map((r,s)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute right-3 top-3 z-10 flex items-center gap-2 rounded-xl bg-white/90 px-2 py-1 shadow-sm backdrop-blur",children:[e.jsx(x,{variant:"ghost",onClick:()=>p(s,-1),"aria-label":"Mover arriba",disabled:s===0,className:"h-8 w-8 px-0 text-slate-800 hover:bg-slate-200",children:"‚Üë"}),e.jsx(x,{variant:"ghost",onClick:()=>p(s,1),"aria-label":"Mover abajo",disabled:s===i.length-1,className:"h-8 w-8 px-0 text-slate-800 hover:bg-slate-200",children:"‚Üì"}),e.jsx(x,{onClick:()=>h(r.slug),"aria-label":"Quitar del itinerario",className:"h-8 w-8 rounded-lg bg-red-50 px-0 text-red-600 hover:bg-red-100",children:"üóëÔ∏è"})]}),e.jsx($,{place:r})]},r.slug))})]})]})]}):e.jsx("div",{className:"mx-auto max-w-6xl px-4 py-10",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/70 p-8",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Mi itinerario"}),e.jsx("p",{className:"mt-2 text-lg text-slate-600",children:"Todav√≠a no guardaste lugares."}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-3",children:e.jsx(T,{to:"/que-hacer",children:e.jsx(x,{children:"Explorar qu√© hacer"})})})]})}):e.jsx("div",{className:"mx-auto max-w-6xl px-4 py-10",children:e.jsx("p",{className:"text-lg text-slate-600",children:"Cargando itinerario‚Ä¶"})})}export{W as default};
