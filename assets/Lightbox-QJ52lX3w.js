import{j as s}from"./motion-Y783SViA.js";import{r as l}from"./react-DN5FSLOy.js";import{A as M}from"./seo-CizQY5wT.js";function L(r,a){return a?(r%a+a)%a:0}function D({items:r,index:a,onClose:v,onPrev:m,onNext:b}){const o=r.length,u=L(a,o),x=r[u],k=l.useRef(null),w=l.useRef(null),y=l.useMemo(()=>{if(!o)return null;const e=(u-1+o)%o;return r[e]?.src??null},[r,u,o]),E=l.useMemo(()=>{if(!o)return null;const e=(u+1)%o;return r[e]?.src??null},[r,u,o]);return l.useEffect(()=>{const e=document.body.style.overflow,g=document.body.style.paddingRight,d=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",d>0&&(document.body.style.paddingRight=`${d}px`);const f=n=>{if(n.key==="Escape"&&v(),n.key==="ArrowLeft"&&m(),n.key==="ArrowRight"&&b(),n.key==="Tab"){const p=w.current;if(!p)return;const c=p.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!c.length)return;const i=c[0],t=c[c.length-1];!n.shiftKey&&document.activeElement===t?(n.preventDefault(),i.focus()):n.shiftKey&&document.activeElement===i&&(n.preventDefault(),t.focus())}};return window.addEventListener("keydown",f),k.current?.focus(),()=>{window.removeEventListener("keydown",f),document.body.style.overflow=e,document.body.style.paddingRight=g}},[v,m,b]),l.useEffect(()=>{if(y){const e=new Image;e.src=y}if(E){const e=new Image;e.src=E}},[y,E]),l.useEffect(()=>{const e=w.current;if(!e)return;let g=0,d=0,f=!1;const n=i=>{const t=i.touches[0];t&&(g=t.clientX,d=t.clientY,f=!1)},p=i=>{const t=i.touches[0];if(!t)return;const h=t.clientX-g,j=t.clientY-d;Math.abs(h)>10&&Math.abs(h)>Math.abs(j)&&(f=!0)},c=i=>{const t=i.changedTouches[0];if(!t)return;const h=t.clientX-g,j=t.clientY-d;f&&Math.abs(h)>50&&Math.abs(h)>Math.abs(j)&&(h>0?m():b())};return e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchmove",p,{passive:!0}),e.addEventListener("touchend",c,{passive:!0}),()=>{e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",p),e.removeEventListener("touchend",c)}},[m,b]),x?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",role:"dialog","aria-modal":"true","aria-label":"Visor de imágenes",onMouseDown:v,children:s.jsxs("div",{ref:w,className:"relative w-full max-w-5xl overflow-hidden rounded-2xl bg-black select-none",onMouseDown:e=>e.stopPropagation(),children:[s.jsx(M,{src:x.src,alt:x.alt??"Imagen",className:"max-h-[78vh] w-full object-contain",loading:"eager",decoding:"async",fetchPriority:"high"}),s.jsx("button",{ref:k,type:"button",onClick:v,className:"absolute right-3 top-3 rounded-xl bg-white/90 px-3 py-2 text-md font-medium text-slate-900 shadow hover:bg-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40","aria-label":"Cerrar",children:"Cerrar ✕"}),o>1?s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:m,className:"absolute left-3 top-1/2 -translate-y-1/2 rounded-xl bg-white/90 px-3 py-2 text-md font-medium text-slate-900 shadow hover:bg-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40","aria-label":"Anterior",children:"←"}),s.jsx("button",{type:"button",onClick:b,className:"absolute right-3 top-1/2 -translate-y-1/2 rounded-xl bg-white/90 px-3 py-2 text-md font-medium text-slate-900 shadow hover:bg-white focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40","aria-label":"Siguiente",children:"→"}),s.jsxs("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 rounded-xl bg-white/90 px-3 py-1 text-md font-medium text-slate-900",children:[u+1," / ",o]})]}):null]})}):null}export{D as default};
