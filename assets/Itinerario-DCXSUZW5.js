const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PlaceMap-D4Q5APgx.js","assets/motion-4lzZM1vH.js","assets/react-CS5HZ5au.js","assets/leaflet-Cb3phnou.js","assets/maps-D4Ps3fer.js","assets/PlaceMap-CIGW-MKW.css"])))=>i.map(i=>d[i]);
import{_}from"./index-hq8LOA2B.js";import{j as e}from"./motion-4lzZM1vH.js";import{r as c,L as T}from"./react-CS5HZ5au.js";import{s as E,B as x,C as O,A}from"./seo-rf2vQfsQ.js";import{T as h}from"./Tag-B2H443fy.js";import{p as b}from"./places-DTPpa8rN.js";import{g as C}from"./maps-D4Ps3fer.js";import{g as y}from"./storage-ClT4Xxo4.js";const D={"1-2h":90,"medio-dia":240,"dia-completo":420};function k(t){return t.reduce((s,r)=>s+D[r.duration],0)}function v(t){const s=Math.floor(t/60),r=t%60;return s===0?`${r} min`:r===0?`${s} h`:`${s} h ${r} min`}function M(t){return t<=120?"Plan corto (1‚Äì2 horas)":t<=300?"Medio d√≠a":"D√≠a completo"}const S="tigre:itinerary:order:v1";function L(){try{const t=localStorage.getItem(S);return t?JSON.parse(t):[]}catch{return[]}}function R(t){localStorage.setItem(S,JSON.stringify(t))}function z(t,s){const r=new Set(t),i=s.filter(o=>r.has(o)),d=t.filter(o=>!i.includes(o));return[...i,...d]}function P(t){const r=(typeof window<"u"?window.location.href:t).split("#")[0];return r.endsWith("/")?r.slice(0,-1):r}function B(t,s){const r=k(t),i=`Itinerario en Tigre ‚Äî ${M(r)} (${v(r)})`,d=typeof window<"u"?P(s):s,o=t.map((a,u)=>{const p=`${d}/#/lugares/${a.slug}`,f=typeof a.lat=="number"&&typeof a.lng=="number"?C(a.lat,a.lng):null;return[`${u+1}) ${a.name}`,`   Detalle: ${p}`,f?`   C√≥mo llegar: ${f}`:null].filter(Boolean).join(`
`)});return[i,"",...o].join(`
`)}const U=c.lazy(()=>_(()=>import("./PlaceMap-D4Q5APgx.js"),__vite__mapDeps([0,1,2,3,4,5]))),V=new Set(b.map(t=>t.slug));function N(t){return t.filter(s=>V.has(s))}function q(t){return Array.isArray(t.tags)?t.tags:[]}function F({place:t,index:s,total:r,onMove:i,onRemove:d}){const o=q(t).slice(0,3);return e.jsxs("article",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"absolute right-3 top-3 z-10 flex items-center gap-2 rounded-xl bg-white/90 px-2 py-1 shadow-sm backdrop-blur",children:[e.jsx(x,{variant:"ghost",onClick:()=>i(s,-1),"aria-label":"Mover arriba",disabled:s===0,className:"h-8 w-8 px-0 text-slate-800 hover:bg-slate-200",children:"‚Üë"}),e.jsx(x,{variant:"ghost",onClick:()=>i(s,1),"aria-label":"Mover abajo",disabled:s===r-1,className:"h-8 w-8 px-0 text-slate-800 hover:bg-slate-200",children:"‚Üì"}),e.jsx(x,{onClick:()=>d(t.slug),"aria-label":"Quitar del itinerario",className:"h-8 w-8 rounded-lg bg-red-50 px-0 text-red-600 hover:bg-red-100",children:"üóëÔ∏è"})]}),e.jsxs("div",{className:"grid gap-4 p-4 sm:grid-cols-[220px_1fr] sm:items-stretch",children:[e.jsx("div",{className:"relative overflow-hidden rounded-2xl bg-slate-100",children:e.jsx(A,{src:t.coverImage,alt:t.name,className:"aspect-[4/3] h-full w-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"flex min-w-0 flex-col",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(h,{children:t.category}),e.jsx(h,{children:t.duration}),e.jsx(h,{children:t.budget}),t.locationType?e.jsx(h,{children:t.locationType==="entrance"?"Acceso":"Zona"}):null]}),e.jsx("h3",{className:"mt-3 line-clamp-1 text-xl font-semibold tracking-tight text-slate-900",children:t.name}),t.shortDescription?e.jsx("p",{className:"mt-1 line-clamp-2 text-base text-slate-600",children:t.shortDescription}):null,o.length?e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:o.map(a=>e.jsx("span",{className:"rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-sm font-medium text-slate-700",children:a},a))}):null,e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(T,{to:`/lugares/${t.slug}`,children:e.jsx(x,{children:"Ver detalle"})}),typeof t.lat=="number"&&typeof t.lng=="number"?e.jsx("a",{href:C(t.lat,t.lng),target:"_blank",rel:"noreferrer",children:e.jsx(x,{variant:"ghost",children:"C√≥mo llegar"})}):null]})]})]})]})}function X(){c.useEffect(()=>{E("Mi itinerario ‚Äî Tigre Turismo","Organiz√° tus favoritos, estim√° tiempos y arm√° un plan.")},[]);const[t,s]=c.useState(()=>{const l=z(y(),L());return N(l)}),[r,i]=c.useState(!1),[d,o]=c.useState("lista");c.useEffect(()=>{R(t)},[t]);const a=c.useMemo(()=>{const l=new Map(b.map(n=>[n.slug,n]));return t.map(n=>l.get(n)).filter(n=>!!n)},[t]),u=c.useMemo(()=>k(a),[a]),p=c.useMemo(()=>M(u),[u]),f=(l,n)=>{s(m=>{const g=[...m],j=l+n;return j<0||j>=g.length?m:([g[l],g[j]]=[g[j],g[l]],g)})},w=()=>{const l=N(y());s(l)},I=l=>{s(n=>n.filter(m=>m!==l))},$=async()=>{const l=window.location.origin,n=B(a,l);try{await navigator.clipboard.writeText(n),i(!0),window.setTimeout(()=>i(!1),1500)}catch{const m=document.createElement("textarea");m.value=n,document.body.appendChild(m),m.select(),document.execCommand("copy"),document.body.removeChild(m),i(!0),window.setTimeout(()=>i(!1),1500)}};return b.length?t.length?e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-10",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:"Mi itinerario"}),e.jsx("p",{className:"mt-1 text-lg text-slate-600",children:"Orden√° tus favoritos y obten√© una estimaci√≥n del tiempo total."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(h,{children:`${a.length} lugares`}),e.jsx(h,{children:v(u)}),e.jsx(h,{children:p})]})]}),e.jsxs("div",{className:"mt-5 flex w-full overflow-hidden rounded-2xl border border-slate-200 bg-white/70 p-1 md:hidden",children:[e.jsx("button",{type:"button",onClick:()=>o("lista"),className:["flex-1 rounded-xl px-4 py-2 text-base font-semibold transition",d==="lista"?"bg-teal-900 text-white":"text-slate-700 hover:bg-white"].join(" "),children:"Lista"}),e.jsx("button",{type:"button",onClick:()=>o("mapa"),className:["flex-1 rounded-xl px-4 py-2 text-base font-semibold transition",d==="mapa"?"bg-teal-900 text-white":"text-slate-700 hover:bg-white"].join(" "),children:"Mapa"})]}),e.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-[360px_1fr]",children:[e.jsxs("div",{className:"space-y-4 lg:sticky lg:top-24 lg:h-fit",children:[e.jsxs(O,{children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-6",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Resumen"}),e.jsx(h,{children:p})]}),e.jsxs("div",{className:"mt-3 space-y-2 px-4 text-lg text-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Lugares"}),e.jsx("span",{className:"font-semibold",children:a.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Tiempo estimado"}),e.jsx("span",{className:"font-semibold",children:v(u)})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 px-4 pb-4",children:[e.jsx(x,{variant:"ghost",onClick:w,children:"Resetear orden"}),e.jsx(x,{onClick:$,disabled:!a.length,children:r?"Copiado ‚úì":"Copiar plan del d√≠a"})]}),e.jsx("p",{className:"px-4 pb-6 text-base text-slate-500",children:"Estimaci√≥n solo de actividades. No incluye traslados, filas ni pausas."})]}),e.jsxs("div",{className:d==="lista"?"hidden md:block":"",children:[e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white/70 p-6 text-slate-700",children:"Cargando mapa‚Ä¶"}),children:e.jsx(U,{places:a,height:340})}),e.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Tip: toc√° cada punto para ver el nombre."})]})]}),e.jsx("div",{className:d==="mapa"?"hidden md:block":"",children:e.jsx("div",{className:"grid gap-4",children:a.map((l,n)=>e.jsx(F,{place:l,index:n,total:a.length,onMove:f,onRemove:I},l.slug))})})]})]}):e.jsx("div",{className:"mx-auto max-w-6xl px-4 py-10",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/70 p-8",children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Mi itinerario"}),e.jsx("p",{className:"mt-2 text-lg text-slate-600",children:"Todav√≠a no guardaste lugares."}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-3",children:e.jsx(T,{to:"/que-hacer",children:e.jsx(x,{children:"Explorar qu√© hacer"})})})]})}):e.jsx("div",{className:"mx-auto max-w-6xl px-4 py-10",children:e.jsx("p",{className:"text-lg text-slate-600",children:"Cargando itinerario‚Ä¶"})})}export{X as default};
